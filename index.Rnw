ascii
=====
David Hajage <dhajage[at]gmail[dot]com>

http://eusebe.github.com/ascii[ascii] is a R package for writing http://www.methods.co.nz/asciidoc/[asciidoc], http://txt2tags.sourceforge.net/[txt2tags], http://sphinx.pocoo.org/[sphinx] or http://orgmode.org/[org] documents with embeded R code.

news
----

include::NEWS[]

short example
-------------

  <<>>=
  x <- matrix(1:4, 2, 2)
  x
  @

gives :

<<simplematrix1>>=
x <- matrix(1:4, 2, 2)
x
@

  <<results=ascii,echo=FALSE>>=
  ascii(x, caption = "A simple matrix", width = 30)
  @

gives :

<<simplematrix2,results=ascii,echo=FALSE>>=
ascii(x, caption = "A simple matrix", width = 30)
@

what ascii provides
-------------------

ascii provided :

* a generic method for common R objects: +ascii()+. Default argument depends of R object,
* several Sweave drivers: +RweaveAsciidoc()+, +RweaveT2t()+, +RweaveSphinx()+ and +RweaveOrg()+. 
* some simple wrappers for +Sweave("yourfile.Rnw", RweaveXxx)+ named +Asciidoc()+, +T2t()+, +Sphinx()+ and +Org()+.

features/options
----------------

See +?ascii+ for a complete description of all arguments.

[options='header', frame = 'topbot', grid = 'none']
|========================================================================================================================================================================================================================================================================================================================================
|                                                                                                                                                                                           | asciidoc                        | txt2tags                          | sphinx                                               | org          |
| *Arguments*                                                                                                                                                                               |                                 |                                   |                                                      |              |
| include.rownames                                                                                                                                                                          | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [green]#yes# |
| include.colnames                                                                                                                                                                          | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [green]#yes# |
| rownames                                                                                                                                                                                  | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [green]#yes# |
| colnames                                                                                                                                                                                  | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [green]#yes# |
| format                                                                                                                                                                                    | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [green]#yes# |
| digits                                                                                                                                                                                    | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [green]#yes# |
| decimal.mark                                                                                                                                                                              | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [green]#yes# |
| na.print                                                                                                                                                                                  | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [green]#yes# |
| caption                                                                                                                                                                                   | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [green]#yes# |
| caption.level                                                                                                                                                                             | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [green]#yes# |
| width                                                                                                                                                                                     | [green]#yes#                    | [red]#no#                         | [red]#no#                                            | [red]#no#    |
| frame                                                                                                                                                                                     | [green]#yes#                    | [green]#yes# (all or none)        | [red]#no#                                            | [red]#no#    |
| grid                                                                                                                                                                                      | [green]#yes#                    | [red]#no#                         | [red]#no#                                            | [red]#no#    |
| valign                                                                                                                                                                                    | [green]#yes#                    | [red]#no#                         | [red]#no#                                            | [red]#no#    |
| header                                                                                                                                                                                    | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [green]#yes# |
| footer                                                                                                                                                                                    | [green]#yes#                    | [green]#yes#                      | [red]#no#                                            | [red]#no#    |
| align                                                                                                                                                                                     | [green]#yes#                    | [green]#yes#                      | [red]#no#                                            | [red]#no#    |
| col.width                                                                                                                                                                                 | [green]#yes#                    | [red]#no#                         | [red]#no#                                            | [red]#no#    |
| style                                                                                                                                                                                     | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [green]#yes# |
| cgroup                                                                                                                                                                                    | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [red]#no#    |
| n.cgroup                                                                                                                                                                                  | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [red]#no#    |
| calign                                                                                                                                                                                    | [green]#yes#                    | [green]#yes#                      | [red]#no#                                            | [red]#no#    |
| cvalign                                                                                                                                                                                   | [green]#yes#                    | [red]#no#                         | [red]#no#                                            | [red]#no#    |
| cstyle                                                                                                                                                                                    | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [red]#no#    |
| rgroup                                                                                                                                                                                    | [green]#yes#                    | [red]#no#                         | [green]#yes#                                         | [red]#no#    |
| n.rgroup                                                                                                                                                                                  | [green]#yes#                    | [red]#no#                         | [green]#yes#                                         | [red]#no#    |
| ralign                                                                                                                                                                                    | [green]#yes#                    | [red]#no#                         | [red]#no#                                            | [red]#no#    |
| rvalign                                                                                                                                                                                   | [green]#yes#                    | [red]#no#                         | [red]#no#                                            | [red]#no#    |
| rstyle                                                                                                                                                                                    | [green]#yes#                    | [red]#no#                         | [green]#yes#                                         | [red]#no#    |
| list.type                                                                                                                                                                                 | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [green]#yes# |
| condense                                                                                                                                                                                  | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [green]#yes# |
| *Output*                                                                                                                                                                                  |                                 |                                   |                                                      |              |
| html                                                                                                                                                                                      | [green]#yes#                    | [green]#yes#                      | [green]#yes#                                         | [green]#yes# |
| docbook                                                                                                                                                                                   | [green]#yes#                    | [green]#yes#                      | [red]#no#                                            | [green]#yes# |
| latex                                                                                                                                                                                     | [green]#yes# (experimental)     | [green]#yes#                      | [green]#yes# (col and row spans not implemented yet) | [green]#yes# |
| *Feature*                                                                                                                                                                                 |                                 |                                   |                                                      |              |
| syntax color                                                                                                                                                                              | [green]#yes# (but not for R...) | [red]#no#                         | [green]#yes#                                         | [green]#yes# |
|========================================================================================================================================================================================================================================================================================================================================


ascii examples
-------------

ascii provides methods for:

<<methods>>=
methods(ascii)
@

vector
~~~~~~

<<vector>>=
ascii(1:4)
@

<<vector2,echo=FALSE,results=ascii>>=
ascii(1:4)
@

matrix
~~~~~~

<<matrix>>=
ascii(VADeaths, include.rownames = T, include.colnames = T, caption = "VADeaths", header = T, col.width = c(1, 2, 2, 2, 2, 2), valign = "middle", align = "lrrrr", frame = "topbot")
@

<<matrix2,echo=FALSE,results=ascii>>=
ascii(VADeaths, include.rownames = T, include.colnames = T, caption = "VADeaths", header = T, col.width = c(1, 2, 2, 2, 2, 2), valign = "middle", align = "lrrrr", frame = "topbot")
@

data.frame
~~~~~~~~~~

<<dataframe>>=
ascii(iris[1:10,], include.rownames = F, caption = "iris", width = 75, align = "c", valign = "bottom", frame = "topbot", grid = "none")
@

<<dataframe2,echo=FALSE,results=ascii>>=
ascii(iris[1:10,], include.rownames = F, caption = "iris", width = 75, align = "c", valign = "bottom", frame = "topbot", grid = "none")
@

row (and col) headings
~~~~~~~~~~~~~~~~~~~~~~

<<rowheads>>=
library(reshape)
ff_d <- melt(french_fries, id=1:4, na.rm=TRUE)
toto <- cast(ff_d, treatment + subject ~ variable, mean, margins="treatment")
ascii(toto[, -1], rgroup = c("Treatment", paste("Treatment:", as.character(unique(toto[, 1])))), n.rgroup = c(1, table(toto[, 1])), rstyle = "s", rvalign = "middle")
@ 

<<rowheads2,echo=FALSE,results=ascii>>=
library(reshape)
ff_d <- melt(french_fries, id=1:4, na.rm=TRUE)
toto <- cast(ff_d, treatment + subject ~ variable, mean, margins="treatment")
ascii(toto[, -1], rgroup = c("Treatment", paste("Treatment:", as.character(unique(toto[, 1])))), n.rgroup = c(1, table(toto[, 1])), rstyle = "s", rvalign = "middle")
@ 

summary.table
~~~~~~~~~~~~~

<<summaryTable>>=
ascii(summary(table(1:4, 1:4)))
@

<<summaryTable2,echo=FALSE,results=ascii>>=
ascii(summary(table(1:4, 1:4)))
@

labeled list
~~~~~~~~~~~~

<<labeledlist>>=
ascii(version)
@

<<summaryTable2,echo=FALSE,results=ascii>>=
ascii(version)
@

glm
~~~

<<glm>>=
counts <- c(18,17,15,20,10,20,25,13,12)
outcome <- gl(3,1,9)
treatment <- gl(3,3)
d.AD <- data.frame(treatment, outcome, counts)
glm.D93 <- glm(counts ~ outcome + treatment, family=poisson())
glm.D93
ascii(glm.D93, caption = "glm.D93")
ascii(anova(glm.D93), caption = "anova glm.D93", include.rownames = T)
@

<<glm2,echo=FALSE,results=ascii>>=
ascii(glm.D93, caption = "glm.D93")
ascii(anova(glm.D93), caption = "anova glm.D93", include.rownames = T)
@

describe
~~~~~~~~

<<describe>>=
library(Hmisc)
label(esoph$agegp) <- "Age group"
label(esoph$alcgp) <- "Alcohol group"
label(esoph$tobgp) <- "Tobacco group"
label(esoph$ncontrols) <- "Number of control"
label(esoph$age) <- "Age"
units(esoph$age) <- "Years"

ascii(describe(esoph))
@

<<describe,echo=FALSE,results=ascii>>=
library(Hmisc)
ascii(describe(esoph))
@

plot
~~~~

<<ggplot2, fig=TRUE>>=
library(ggplot2)
p <- qplot(price, ..density.., data = diamonds, geom = "freqpoly", binwidth = 1000, colour = color)
print(p)
@

other outputs
~~~~~~~~~~~~~

<<other>>=
library(reshape)
names(airquality) <- tolower(names(airquality))
aqm <- melt(airquality, id = c("month", "day"), na.rm = TRUE)
res <- cast(aqm, month ~ variable, mean, margins= "grand_row")
res
print(ascii(res), "t2t")
print(ascii(res), "sphinx")
print(ascii(res), "org")
@

Follow those links to see real examples:

* http://eusebe.github.com/ascii/t2t.html[with text2tags]
* http://eusebe.github.com/ascii/sphinx.html[with sphinx]
* http://eusebe.github.com/ascii/org.html[with org]

convert
-------

+Sweave+ process creates a +yourdocument.xxx+ file from +yourdocument.Rnw+.

----
Sweave("youdocument.Rnw", RweaveXxx)
----

You can convert it to html format with the following command:

----
asciidoc yourdocument.txt
or
txt2tags -t html yourdocument.t2t
or
sphinx-build -b html . youdocument # need a conf.py file
or
Alt-X org-export-as-html
----

or to other formats...

For example, you can see the source of http://eusebe.github.com/ascii/index.Rnw[this documentation], the file http://eusebe.github.com/ascii/index.txt[generated by +Sweave+], the same file in http://eusebe.github.com/ascii/index.xml[docbook format], the same file http://eusebe.github.com/ascii/index.pdf[converted to pdf] with dblatex, and the same file http://eusebe.github.com/ascii/index.odt[converted to odt] with docbook2odf.

more informations
-----------------

- asciidoc: http://www.methods.co.nz/asciidoc
- txt2tags: http://txt2tags.sourceforge.net
- sphinx: http://sphinx.pocoo.org/
- org-mode: http://orgmode.org/

There is another way to create org documents with embedded R code : http://orgmode.org/worg/org-contrib/babel/org-babel.php[org-babel]. Thanks to http://blogisticreflections.wordpress.com/[Erik Iverson] for informing me about org-mode and org-babel.
  
ascii for real
--------------

- Derek H. Ogle has written http://www.ncfaculty.net/dogle/fishR/bookex/AIFFD/AIFFD.html[some vignettes] for the book `Analysis and Interpretation of Freshwater Fisheries Data' using http://eusebe.github.com/ascii[+ascii+].
- http://learnr.wordpress.com/[This blog] uses http://eusebe.github.com/ascii[+ascii+] and http://srackham.wordpress.com/blogpost1/[blogpost] to generate and publish post.
  - http://blogisticreflections.wordpress.com/[This blog] too but with http://blogisticreflections.wordpress.com/2009/09/20/welcome-to-blogistic-reflections/[another method].
